/**
 * Translation object for the internationalization (i18n) of the site.
 * Contains all texts for German (de) and English (en).
 * @type {Object.<string, Object.<string, string>>}
 */
window.translations = {
  en: {
    "nav.about": "About me",
    "nav.skills": "Skill set",
    "nav.work": "My work",
    "nav.contact": "Contact",
    "hero.hello": "Hello! I am Raphael",
    "about.title": "Let's work<br/>together",
    "about.iam": "I am",
    "about.text1":
      "I am a passionate Frontend Developer with a strong focus on creating intuitive and user-friendly web applications. My journey in programming is driven by the constant pursuit of learning new technologies and frameworks. I believe in writing clean, maintainable code that not only works but also makes a difference in users' daily lives.",
    "about.text2":
      "My approach to problem-solving is rooted in analytical thinking and creativity. I enjoy breaking down complex challenges into manageable parts and finding elegant solutions. Through collaboration and persistence, I continuously learn from every project, always striving to improve both my technical skills and my ability to deliver high-quality results.",
    "about.btn": "Send a message",
    "about.badge.location": "located in<br/>Munich",
    "about.badge.remote": "open to work<br/>remote",
    "about.badge.relocate": "open to<br/>relocate",
    "skills.title": "Skill set",
    "skills.cta": "Get in touch",
    "skills.looking": "Looking for a developer?",
    "skills.talk": "Let's talk!",
    "work.title": "My work",
    "work.subtitle":
      "Explore a selection of my work here - Interact with projects to see my skills in action.",
    "work.join.desc":
      "Task manager inspired by the Kanban system. Create and organize tasks using drag and drop functions, assign users and categories.",
    "work.pollo.desc":
      "Jump, run and throw game based on object-oriented approach. Help Pepe to find coins and tabasco sauce to fight against the crazy hen.",
    "work.bubble.desc":
      "A Slack clone (chat application/instant messaging system) modeled using Firebase. Communicate in channels and direct messages.",
    "work.pokedex.desc":
      "Based on the PokéAPI a simple library that provides and catalogs pokémon information.",
    "testimonials.title": "Need a teamplayer?",
    "testimonials.subtitle": "Here what my colleagues said about me",
    "testimonials.james.role": "Frontend Developer",
    "testimonials.james.text":
      '"Raphael is a reliable and friendly developer. He was able to solve complex tasks and write clean code. I highly recommend him as a developer."',
    "testimonials.evelyn.role": "Backend Developer",
    "testimonials.evelyn.text":
      '"Raphael is a motivated and enthusiastic developer who brings creative ideas and is always up for new challenges. He is a pleasure to work with. He is focused and fast."',
    "testimonials.noah.role": "Project Manager",
    "testimonials.noah.text":
      '"Raphael has his develop domain - clear communication, with the team members. He is a reliable and friendly person."',
    "contact.title": "Contact",
    "contact.heading": "Got a problem to solve?",
    "contact.text":
      "If you want people to contact you, give them a way. Fill in your information, so they can reach out to the email or phone number provided.",
    "contact.looking":
      'Would you also consider checking my profile on <a href="https://linkedin.com" target="_blank">LinkedIn</a>?',
    "contact.form.name": "Your name",
    "contact.form.email": "Your email",
    "contact.form.message": "Your message",
    "contact.form.privacy":
      'I\'ve read the <a href="privacypolicy.html">privacy policy</a> and agree to the processing of my data as outlined.',
    "contact.form.btn": "Say Hello ;)",
    "contact.form.error.name": "Please enter your name.",
    "contact.form.error.email": "Please enter a valid email address.",
    "contact.form.error.message": "Please enter a message.",
    "contact.form.sending": "Sending...",
    "contact.form.success": "Thank you for your message!",
    "footer.legal": "Legal Notice",
    "footer.privacy": "Privacy Policy",
  },
  de: {
    "nav.about": "Über mich",
    "nav.skills": "Fähigkeiten",
    "nav.work": "Meine Arbeit",
    "nav.contact": "Kontakt",
    "hero.hello": "Hallo! Ich bin Raphael",
    "about.title": "Lass uns zusammen arbeiten",
    "about.iam": "Ich bin",
    "about.text1":
      "Ich bin ein leidenschaftlicher Frontend-Entwickler mit einem starken Fokus auf die Entwicklung intuitiver und benutzerfreundlicher Webanwendungen. Meine Reise in der Programmierung wird durch das ständige Streben nach dem Erlernen neuer Technologien und Frameworks angetrieben. Ich glaube an sauberen, wartbaren Code, der nicht nur funktioniert, sondern auch einen Unterschied im Alltag der Nutzer macht.",
    "about.text2":
      "Mein Ansatz zur Problemlösung basiert auf analytischem Denken und Kreativität. Ich genieße es, komplexe Herausforderungen in überschaubare Teile zu zerlegen und elegante Lösungen zu finden. Durch Zusammenarbeit und Ausdauer lerne ich kontinuierlich aus jedem Projekt und strebe danach, sowohl meine technischen Fähigkeiten als auch meine Fähigkeit, qualitativ hochwertige Ergebnisse zu liefern, zu verbessern.",
    "about.btn": "Nachricht senden",
    "about.badge.location": "Standort<br/>München",
    "about.badge.remote": "offen für<br/>Remote-Arbeit",
    "about.badge.relocate": "offen für<br/>Umzug",
    "skills.title": "Fähigkeiten",
    "skills.cta": "Kontakt aufnehmen",
    "skills.looking": "Auf der Suche nach einem Entwickler?",
    "skills.talk": "Lass uns reden!",
    "work.title": "Meine Arbeit",
    "work.subtitle":
      "Entdecke hier eine Auswahl meiner Arbeiten – Interagiere mit Projekten, um meine Fähigkeiten in Aktion zu sehen.",
    "work.join.desc":
      "Aufgabenmanager inspiriert vom Kanban-System. Erstelle und organisiere Aufgaben mit Drag-and-Drop-Funktionen, weise Benutzer und Kategorien zu.",
    "work.pollo.desc":
      "Ein Jump-, Run- und Wurfspiel basierend auf einem objektorientierten Ansatz. Hilf Pepe, Münzen und Tabasco-Flaschen zu finden, um gegen das verrückte Huhn zu kämpfen.",
    "work.bubble.desc":
      "Ein Slack-Klon (Chat-Anwendung/Instant-Messaging-System) modelliert mit POUCH.io/CouchDB.",
    "work.pokedex.desc":
      "Basierend auf der PokéAPI eine einfache Bibliothek, die Pokémon-Informationen bereitstellt und katalogisiert.",
    "testimonials.title": "Teamplayer gesucht?",
    "testimonials.subtitle": "Das sagen meine Kollegen über mich",
    "testimonials.james.role": "Frontend-Entwickler",
    "testimonials.james.text":
      '"Raphael ist ein zuverlässiger und freundlicher Entwickler. Er konnte komplexe Aufgaben lösen und sauberen Code schreiben. Ich empfehle ihn sehr als Entwickler."',
    "testimonials.evelyn.role": "Backend-Entwicklerin",
    "testimonials.evelyn.text":
      '"Raphael ist ein motivierter und begeisterungsfähiger Entwickler, der kreative Ideen einbringt und immer für neue Herausforderungen bereit ist. Die Zusammenarbeit mit ihm macht Freude. Er ist fokussiert und schnell."',
    "testimonials.noah.role": "Projektmanager",
    "testimonials.noah.text":
      '"Raphael hat seine Entwickler-Domäne – klare Kommunikation mit den Teammitgliedern. Er ist eine zuverlässige und freundliche Person."',
    "contact.title": "Kontakt",
    "contact.heading": "Ein Problem zu lösen?",
    "contact.text":
      "Wenn du möchtest, dass man dich kontaktiert, gib ihnen einen Weg. Fülle deine Informationen aus, damit sie dich per E-Mail oder Telefonnummer erreichen können.",
    "contact.looking":
      'Würdest du auch einen Blick auf mein Profil auf <a href="https://linkedin.com" target="_blank">LinkedIn</a> werfen?',
    "contact.form.name": "Dein Name",
    "contact.form.email": "Deine E-Mail",
    "contact.form.message": "Deine Nachricht",
    "contact.form.privacy":
      'Ich habe die <a href="privacypolicy.html">Datenschutzerklärung</a> gelesen und stimme der Verarbeitung meiner Daten wie beschrieben zu.',
    "contact.form.btn": "Sag Hallo ;)",
    "contact.form.error.name": "Bitte gib deinen Namen ein.",
    "contact.form.error.email": "Bitte gib eine gültige E-Mail-Adresse ein.",
    "contact.form.error.message": "Bitte gib eine Nachricht ein.",
    "contact.form.sending": "Wird gesendet...",
    "contact.form.success": "Danke für deine Nachricht!",
    "footer.legal": "Impressum",
    "footer.privacy": "Datenschutzerklärung",
  },
};

/**
 * Currently selected language ("en" or "de").
 * @type {string}
 */
let currentLang = "en";

/**
 * Sets the language of the page and updates all i18n texts.
 * @param {string} lang - Language code ("en" or "de").
 */
function setLanguage(lang) {
  currentLang = lang;
  document.documentElement.lang = lang;

  // Translate all elements with data-i18n
  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang][key]) {
      el.innerHTML = translations[lang][key];
    }
  });

  // Translate all elements with data-i18n-html
  document.querySelectorAll("[data-i18n-html]").forEach((el) => {
    const key = el.getAttribute("data-i18n-html");
    if (translations[lang][key]) {
      el.innerHTML = translations[lang][key];
    }
  });

  // Translate all placeholders
  document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
    const key = el.getAttribute("data-i18n-placeholder");
    if (translations[lang][key]) {
      el.placeholder = translations[lang][key];
    }
  });

  // Activate the current language in the toggle
  const toggleSpans = document.querySelectorAll(
    ".lang-toggle span:not(.separator)",
  );
  toggleSpans.forEach((span) => {
    span.classList.remove("active");
    if (span.textContent.trim().toLowerCase() === lang) {
      span.classList.add("active");
    }
  });
}

/**
 * Initializes the language toggle event listeners.
 */
function initLanguageToggle() {
  const toggleSpans = document.querySelectorAll(
    ".lang-toggle span:not(.separator)",
  );
  toggleSpans.forEach((span) => {
    span.addEventListener("click", () => {
      const lang = span.textContent.trim().toLowerCase();
      if (lang !== currentLang) {
        setLanguage(lang);
      }
    });
  });
}

/**
 * Initializes the language toggle and sets event listeners for switching.
 * Waits for header to be loaded before attaching event listeners.
 */
window.addEventListener("headerLoaded", () => {
  initLanguageToggle();
  // Apply current language to newly loaded header
  setLanguage(currentLang);
});

/**
 * Apply translations to footer when it's loaded.
 */
window.addEventListener("footerLoaded", () => {
  // Apply current language to newly loaded footer
  setLanguage(currentLang);
});

// Fallback: If header is already loaded (e.g., on page without include)
document.addEventListener("DOMContentLoaded", () => {
  // Wait a bit for includes to load, then check again
  setTimeout(() => {
    if (document.querySelector(".lang-toggle")) {
      initLanguageToggle();
    }
  }, 100);
});
